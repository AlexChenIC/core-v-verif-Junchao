# CV32E40Pè°ƒè¯•é—®é¢˜è§£å†³å®å…¸ ğŸ”§

> **ç³»ç»ŸåŒ–çš„é—®é¢˜è¯Šæ–­å’Œè§£å†³æ–¹æ³•é›†**  
> ä»æ–°æ‰‹å¸¸è§é”™è¯¯åˆ°ä¸“å®¶çº§è°ƒè¯•æŠ€å·§çš„å®Œæ•´æŒ‡å—

---

## ğŸ“‹ å®å…¸ç›®å½•

- ğŸ”¥ **ç´§æ€¥æ•‘æ´** - æœ€å¸¸è§é—®é¢˜çš„å¿«é€Ÿè§£å†³æ–¹æ¡ˆ
- ğŸ”§ **ç¼–è¯‘é—®é¢˜** - æ„å»ºé˜¶æ®µé—®é¢˜è¯Šæ–­å’Œä¿®å¤
- ğŸ­ **ä»¿çœŸé—®é¢˜** - è¿è¡Œæ—¶é—®é¢˜ç³»ç»ŸåŒ–æ’æŸ¥
- ğŸ“Š **æ³¢å½¢è°ƒè¯•** - ä¿¡å·çº§è°ƒè¯•çš„ç³»ç»ŸåŒ–æ–¹æ³•
- ğŸ“ **æ—¥å¿—åˆ†æ** - UVMæ—¥å¿—çš„é«˜æ•ˆåˆ†ææŠ€å·§
- âš¡ **æ€§èƒ½é—®é¢˜** - ä»¿çœŸé€Ÿåº¦å’Œèµ„æºé—®é¢˜ä¼˜åŒ–
- ğŸ› ï¸ **ç¯å¢ƒé—®é¢˜** - å·¥å…·é“¾å’Œç¯å¢ƒé…ç½®é—®é¢˜

---

## ğŸ”¥ ç´§æ€¥æ•‘æ´ - 5åˆ†é’Ÿå¿«é€Ÿä¿®å¤

### âš¡ æœ€å¸¸è§çš„5ä¸ªé—®é¢˜

#### ğŸš¨ é—®é¢˜1: "TEST FAILED" - æµ‹è¯•å¤±è´¥

**å¿«é€Ÿè¯Šæ–­ï¼š**
```bash
# æ£€æŸ¥æµ‹è¯•é€€å‡ºçŠ¶æ€
grep -E "(TEST.*FAILED|EXIT.*FAILURE|ERROR)" cv32e40p_*.log | tail -10

# æ£€æŸ¥ç¨‹åºæ˜¯å¦æ­£å¸¸ç»“æŸ
grep -E "(Program.*completed|main.*returned)" cv32e40p_*.log
```

**å¿«é€Ÿä¿®å¤ï¼š**
```bash
# 1. é‡æ–°æ¸…ç†ç¼–è¯‘
make clean_test TEST=your_test
make test TEST=your_test

# 2. æ£€æŸ¥æµ‹è¯•ç¨‹åºé€»è¾‘
cd cv32e40p/tests/programs/custom/your_test/
grep -n "return\|exit" *.c *.S
```

#### ğŸš¨ é—®é¢˜2: ä»¿çœŸæ— æ³•å¯åŠ¨

**å¿«é€Ÿè¯Šæ–­ï¼š**
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo "ä»¿çœŸå™¨: $CV_SIMULATOR"
echo "å·¥å…·é“¾: $CV_SW_TOOLCHAIN"  
echo "é¡¹ç›®è·¯å¾„: $CORE_V_VERIF"

# æ£€æŸ¥ä»¿çœŸå™¨æ˜¯å¦å¯ç”¨
which $CV_SIMULATOR
```

**å¿«é€Ÿä¿®å¤ï¼š**
```bash
# é‡æ–°è®¾ç½®ç¯å¢ƒ
cd $CORE_V_VERIF
source setup_cv32e40p.sh  # å¦‚æœæœ‰çš„è¯

# æˆ–æ‰‹åŠ¨è®¾ç½®
export CV_SIMULATOR=xrun
export CV_CORE=cv32e40p
export CV_SW_TOOLCHAIN=/opt/riscv
export CV_SW_PREFIX=riscv32-unknown-elf-
```

#### ğŸš¨ é—®é¢˜3: ç¼–è¯‘é”™è¯¯

**å¿«é€Ÿè¯Šæ–­ï¼š**
```bash
# æŸ¥çœ‹ç¼–è¯‘é”™è¯¯ä¿¡æ¯
grep -A5 -B5 "error:" cv32e40p_*.log
```

**å¿«é€Ÿä¿®å¤ï¼š**
```bash
# æ£€æŸ¥å·¥å…·é“¾
${CV_SW_PREFIX}gcc --version

# æ¸…ç†é‡æ–°ç¼–è¯‘
make clean_all
make test TEST=hello-world  # å…ˆéªŒè¯åŸºç¡€ç¯å¢ƒ
```

#### ğŸš¨ é—®é¢˜4: ä»¿çœŸå¡ä½

**å¿«é€Ÿè¯Šæ–­ï¼š**
```bash
# æ£€æŸ¥ä»¿çœŸè¿›ç¨‹
ps aux | grep $CV_SIMULATOR

# æ£€æŸ¥æœ€åçš„æ—¥å¿—è¾“å‡º
tail -20 cv32e40p_*.log
```

**å¿«é€Ÿä¿®å¤ï¼š**
```bash
# å¼ºåˆ¶ç»ˆæ­¢ä»¿çœŸ
killall $CV_SIMULATOR  # æˆ–å…·ä½“è¿›ç¨‹åå¦‚ xrun, vsimç­‰

# æ¸…ç†åé‡è¯•
make clean_test TEST=your_test
make test TEST=your_test USER_RUN_FLAGS="+TIMEOUT=100000"
```

#### ğŸš¨ é—®é¢˜5: æƒé™é”™è¯¯

**å¿«é€Ÿè¯Šæ–­ï¼š**
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la cv32e40p_*
ls -la $CV_SW_TOOLCHAIN/bin/
```

**å¿«é€Ÿä¿®å¤ï¼š**
```bash
# ä¿®å¤æƒé™
chmod +x setup_cv32e40p.sh
chmod 755 cv32e40p/sim/uvmt/

# æ£€æŸ¥å·¥å…·é“¾æƒé™
sudo chown -R $USER:$USER $CV_SW_TOOLCHAIN
```

---

## ğŸ”§ ç¼–è¯‘é—®é¢˜ç³»ç»ŸåŒ–è¯Šæ–­

### ğŸ“Š ç¼–è¯‘é˜¶æ®µé—®é¢˜åˆ†ç±»

#### ğŸ” Phase 1: ç¯å¢ƒæ£€æŸ¥

**æ£€æŸ¥æ¸…å•è„šæœ¬ï¼š**
```bash
#!/bin/bash
# compile_env_check.sh - ç¼–è¯‘ç¯å¢ƒæ£€æŸ¥

echo "ğŸ” ç¼–è¯‘ç¯å¢ƒè¯Šæ–­"
echo "=================="

# ğŸ”¹ åŸºç¡€ç¯å¢ƒæ£€æŸ¥
echo "1. åŸºç¡€ç¯å¢ƒ:"
echo "   æ“ä½œç³»ç»Ÿ: $(uname -a)"
echo "   å½“å‰ç›®å½•: $(pwd)"
echo "   ç”¨æˆ·æƒé™: $(whoami)"

# ğŸ”¹ å¿…è¦å˜é‡æ£€æŸ¥
echo "2. ç¯å¢ƒå˜é‡:"
echo "   CV_SIMULATOR: ${CV_SIMULATOR:-'âŒ æœªè®¾ç½®'}"
echo "   CV_CORE: ${CV_CORE:-'âŒ æœªè®¾ç½®'}"
echo "   CV_SW_TOOLCHAIN: ${CV_SW_TOOLCHAIN:-'âŒ æœªè®¾ç½®'}"
echo "   CV_SW_PREFIX: ${CV_SW_PREFIX:-'âŒ æœªè®¾ç½®'}"
echo "   CORE_V_VERIF: ${CORE_V_VERIF:-'âŒ æœªè®¾ç½®'}"

# ğŸ”¹ å·¥å…·å¯ç”¨æ€§æ£€æŸ¥
echo "3. å·¥å…·æ£€æŸ¥:"
if command -v make &> /dev/null; then
    echo "   âœ… make: $(which make)"
else
    echo "   âŒ make: æœªæ‰¾åˆ°"
fi

if command -v python3 &> /dev/null; then
    echo "   âœ… python3: $(which python3)"
else
    echo "   âŒ python3: æœªæ‰¾åˆ°"
fi

if command -v $CV_SIMULATOR &> /dev/null; then
    echo "   âœ… $CV_SIMULATOR: $(which $CV_SIMULATOR)"
else
    echo "   âŒ $CV_SIMULATOR: æœªæ‰¾åˆ°"
fi

# ğŸ”¹ RISC-Vå·¥å…·é“¾æ£€æŸ¥
echo "4. RISC-Vå·¥å…·é“¾:"
if [ -d "$CV_SW_TOOLCHAIN" ]; then
    echo "   âœ… å·¥å…·é“¾ç›®å½•: $CV_SW_TOOLCHAIN"
    
    if command -v ${CV_SW_PREFIX}gcc &> /dev/null; then
        echo "   âœ… GCC: $(${CV_SW_PREFIX}gcc --version | head -1)"
    else
        echo "   âŒ GCC: ${CV_SW_PREFIX}gcc æœªæ‰¾åˆ°"
    fi
    
    if command -v ${CV_SW_PREFIX}objdump &> /dev/null; then
        echo "   âœ… OBJDUMP: å¯ç”¨"
    else
        echo "   âŒ OBJDUMP: ${CV_SW_PREFIX}objdump æœªæ‰¾åˆ°"
    fi
else
    echo "   âŒ å·¥å…·é“¾ç›®å½•ä¸å­˜åœ¨: $CV_SW_TOOLCHAIN"
fi

# ğŸ”¹ é¡¹ç›®ç»“æ„æ£€æŸ¥
echo "5. é¡¹ç›®ç»“æ„:"
if [ -f "$CORE_V_VERIF/cv32e40p/sim/uvmt/Makefile" ]; then
    echo "   âœ… ä¸»Makefileå­˜åœ¨"
else
    echo "   âŒ ä¸»Makefileä¸å­˜åœ¨: $CORE_V_VERIF/cv32e40p/sim/uvmt/Makefile"
fi

if [ -d "$CORE_V_VERIF/core-v-cores/cv32e40p" ]; then
    echo "   âœ… RTLä»£ç ç›®å½•å­˜åœ¨"
else
    echo "   âŒ RTLä»£ç ç›®å½•ä¸å­˜åœ¨: $CORE_V_VERIF/core-v-cores/cv32e40p"
fi
```

#### ğŸ” Phase 2: ç¼–è¯‘é”™è¯¯åˆ†æ

**å¸¸è§ç¼–è¯‘é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š**

##### âŒ é”™è¯¯ç±»å‹1: æ‰¾ä¸åˆ°æ–‡ä»¶

```
é”™è¯¯ä¿¡æ¯: "No such file or directory"
é”™è¯¯ä½ç½®: include è¯­å¥æˆ–æ–‡ä»¶è·¯å¾„
```

**è¯Šæ–­æ–¹æ³•ï¼š**
```bash
# æŸ¥æ‰¾ç¼ºå¤±çš„æ–‡ä»¶
find $CORE_V_VERIF -name "missing_file.h" 2>/dev/null

# æ£€æŸ¥åŒ…å«è·¯å¾„
echo $C_INCLUDE_PATH
echo $CPLUS_INCLUDE_PATH
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ–¹æ¡ˆ1: è®¾ç½®åŒ…å«è·¯å¾„
export C_INCLUDE_PATH=$CORE_V_VERIF/cv32e40p/tests/programs/custom/common:$C_INCLUDE_PATH

# æ–¹æ¡ˆ2: ä¿®æ”¹Makefileæ·»åŠ -Iå‚æ•°
# åœ¨æµ‹è¯•Makefileä¸­æ·»åŠ :
CFLAGS += -I$(CORE_V_VERIF)/cv32e40p/tests/programs/custom/common

# æ–¹æ¡ˆ3: ä½¿ç”¨ç›¸å¯¹è·¯å¾„
#include "../common/test_utils.h"
```

##### âŒ é”™è¯¯ç±»å‹2: é“¾æ¥é”™è¯¯

```
é”™è¯¯ä¿¡æ¯: "undefined reference to 'symbol'"
é”™è¯¯ä½ç½®: é“¾æ¥é˜¶æ®µ
```

**è¯Šæ–­æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥ç¬¦å·å®šä¹‰
${CV_SW_PREFIX}nm your_object.o | grep symbol_name

# æ£€æŸ¥åº“æ–‡ä»¶
${CV_SW_PREFIX}objdump -t library.a | grep symbol_name
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ–¹æ¡ˆ1: æ·»åŠ åº“é“¾æ¥
${CV_SW_PREFIX}gcc -march=rv32imc -mabi=ilp32 \
  -o test test.c -lm  # æ·»åŠ æ•°å­¦åº“

# æ–¹æ¡ˆ2: æŒ‡å®šåº“è·¯å¾„
${CV_SW_PREFIX}gcc -march=rv32imc -mabi=ilp32 \
  -L$CV_SW_TOOLCHAIN/riscv32-unknown-elf/lib \
  -o test test.c -lc

# æ–¹æ¡ˆ3: é™æ€é“¾æ¥
${CV_SW_PREFIX}gcc -march=rv32imc -mabi=ilp32 \
  -static -o test test.c
```

##### âŒ é”™è¯¯ç±»å‹3: æ¶æ„ä¸åŒ¹é…

```
é”™è¯¯ä¿¡æ¯: "can't link soft-float modules with hard-float modules"
é”™è¯¯ä½ç½®: é“¾æ¥é˜¶æ®µ
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿ä¸€è‡´çš„ç¼–è¯‘é€‰é¡¹
${CV_SW_PREFIX}gcc -march=rv32imc -mabi=ilp32 \
  -mno-div -fno-common -static -mcmodel=medany \
  -fvisibility=hidden -nostdlib -nostartfiles \
  -o test test.c
```

#### ğŸ” Phase 3: SystemVerilogç¼–è¯‘é”™è¯¯

##### âŒ UVMç¼–è¯‘é”™è¯¯

**é”™è¯¯ç±»å‹ï¼šUVMç‰ˆæœ¬ä¸åŒ¹é…**
```
é”™è¯¯ä¿¡æ¯: "UVM_ERROR @ 0: reporter [RNTST]"
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥UVMç‰ˆæœ¬
$CV_SIMULATOR -version | grep -i uvm

# ä½¿ç”¨é¡¹ç›®æŒ‡å®šçš„UVMç‰ˆæœ¬
export UVM_HOME=$CORE_V_VERIF/lib/uvm-1.2
```

**é”™è¯¯ç±»å‹ï¼šåŒ…æ–‡ä»¶ç¼ºå¤±**
```
é”™è¯¯ä¿¡æ¯: "can't find package 'uvma_obi_memory_pkg'"
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥åŒ…æ–‡ä»¶è·¯å¾„
find $CORE_V_VERIF -name "*_pkg.sv" | grep obi_memory

# éªŒè¯æ–‡ä»¶åˆ—è¡¨
cat cv32e40p/sim/uvmt/uvmt_cv32e40p.flist
```

---

## ğŸ­ ä»¿çœŸé—®é¢˜ç³»ç»ŸåŒ–æ’æŸ¥

### ğŸ•µï¸ ä»¿çœŸé—®é¢˜è¯Šæ–­æµç¨‹

#### ğŸ” Step 1: å¿«é€ŸçŠ¶æ€æ£€æŸ¥

```bash
#!/bin/bash
# sim_health_check.sh - ä»¿çœŸå¥åº·æ£€æŸ¥

echo "ğŸ­ ä»¿çœŸçŠ¶æ€è¯Šæ–­"
echo "=================="

# ğŸ”¹ è¿›ç¨‹æ£€æŸ¥
SIM_PROCS=$(ps aux | grep -E "($CV_SIMULATOR|xrun|vsim|vcs)" | grep -v grep)
if [ -n "$SIM_PROCS" ]; then
    echo "âœ… ä»¿çœŸè¿›ç¨‹è¿è¡Œä¸­:"
    echo "$SIM_PROCS"
else
    echo "âŒ æœªå‘ç°ä»¿çœŸè¿›ç¨‹"
fi

# ğŸ”¹ æ—¥å¿—æ–‡ä»¶æ£€æŸ¥
LOG_FILES=$(ls -t cv32e40p_*.log 2>/dev/null | head -1)
if [ -n "$LOG_FILES" ]; then
    echo "âœ… æœ€æ–°æ—¥å¿—æ–‡ä»¶: $LOG_FILES"
    echo "   æ–‡ä»¶å¤§å°: $(ls -lh $LOG_FILES | awk '{print $5}')"
    echo "   æœ€åä¿®æ”¹: $(ls -l $LOG_FILES | awk '{print $6 " " $7 " " $8}')"
    
    # æ£€æŸ¥æœ€åå‡ è¡Œè¾“å‡º
    echo "ğŸ“ æœ€å10è¡Œæ—¥å¿—:"
    tail -10 $LOG_FILES
else
    echo "âŒ æœªæ‰¾åˆ°æ—¥å¿—æ–‡ä»¶"
fi

# ğŸ”¹ ä»¿çœŸæ•°æ®åº“æ£€æŸ¥
DB_DIRS=$(ls -d cv32e40p_*.shm 2>/dev/null || ls -d cv32e40p_*.wdb 2>/dev/null)
if [ -n "$DB_DIRS" ]; then
    echo "âœ… ä»¿çœŸæ•°æ®åº“å­˜åœ¨"
else
    echo "âš ï¸  æœªæ‰¾åˆ°ä»¿çœŸæ•°æ®åº“"
fi
```

#### ğŸ” Step 2: å¡æ­»é—®é¢˜è¯Šæ–­

**ç—‡çŠ¶è¯†åˆ«ï¼š**
```bash
# æ£€æŸ¥æ˜¯å¦çœŸçš„å¡æ­»
tail -f cv32e40p_*.log &  # åå°ç›‘æ§æ—¥å¿—
TAIL_PID=$!

sleep 30  # ç­‰å¾…30ç§’

kill $TAIL_PID
echo "30ç§’å†…æ—¥å¿—å˜åŒ–:"
# æ¯”è¾ƒæ–‡ä»¶æ—¶é—´æˆ³
```

**å¡æ­»ç±»å‹åˆ†æï¼š**

##### ğŸ”„ Type 1: æ— é™å¾ªç¯

**ç‰¹å¾ï¼š**
- CPUä½¿ç”¨ç‡æŒç»­100%
- æ—¥å¿—åœæ­¢æ›´æ–°
- ç¨‹åºè®¡æ•°å™¨(PC)åœ¨å°èŒƒå›´å†…å¾ªç¯

**è¯Šæ–­æ–¹æ³•ï¼š**
```bash
# ç”Ÿæˆæ³¢å½¢æ–‡ä»¶è¿›è¡Œåˆ†æ
make test TEST=problematic_test WAVES=1 USER_RUN_FLAGS="+TIMEOUT=100000"

# æŸ¥çœ‹æ³¢å½¢ä¸­çš„PCå˜åŒ–
make waves TEST=problematic_test
# åœ¨æ³¢å½¢æŸ¥çœ‹å™¨ä¸­æœç´¢ PC ä¿¡å·ï¼Œè§‚å¯Ÿæ˜¯å¦åœ¨å¾ªç¯
```

**å¸¸è§åŸå› åŠè§£å†³ï¼š**
```c
// ğŸš« é”™è¯¯ï¼šæ¡ä»¶åˆ¤æ–­é”™è¯¯å¯¼è‡´æ­»å¾ªç¯
while (condition) {
    // å¿˜è®°ä¿®æ”¹condition
    do_something();
}

// âœ… ä¿®å¤ï¼šç¡®ä¿å¾ªç¯æ¡ä»¶ä¼šæ”¹å˜
while (condition) {
    do_something();
    condition = update_condition();  // ç¡®ä¿æ¡ä»¶ä¼šæ”¹å˜
}

// âœ… æ›´å®‰å…¨ï¼šæ·»åŠ å¾ªç¯è®¡æ•°å™¨
int timeout = 1000;
while (condition && timeout-- > 0) {
    do_something();
    condition = update_condition();
}
if (timeout <= 0) {
    printf("å¾ªç¯è¶…æ—¶ï¼Œå¯èƒ½å­˜åœ¨é—®é¢˜\n");
}
```

##### ğŸ”„ Type 2: ç­‰å¾…è¶…æ—¶

**ç‰¹å¾ï¼š**
- CPUä½¿ç”¨ç‡è¾ƒä½
- ç¨‹åºåœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶
- æ—¥å¿—æ˜¾ç¤º"waiting for..."

**è¯Šæ–­æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥ç­‰å¾…çš„ä¿¡å·çŠ¶æ€
grep -E "(wait|pending|timeout)" cv32e40p_*.log

# åœ¨æ³¢å½¢ä¸­æ£€æŸ¥ä¿¡å·æ—¶åº
```

**å¸¸è§åŸå› åŠè§£å†³ï¼š**
```c
// ğŸš« é”™è¯¯ï¼šç­‰å¾…æ°¸è¿œä¸ä¼šåˆ°æ¥çš„äº‹ä»¶
while (!(status_register & READY_BIT)) {
    // ç­‰å¾…å°±ç»ªæ ‡å¿—ï¼Œä½†å¯èƒ½ç¡¬ä»¶æœ‰é—®é¢˜
}

// âœ… ä¿®å¤ï¼šæ·»åŠ è¶…æ—¶æœºåˆ¶
int timeout = 10000;  // 10000ä¸ªå¾ªç¯
while (!(status_register & READY_BIT) && timeout-- > 0) {
    // å¯é€‰ï¼šçŸ­æš‚å»¶è¿Ÿ
    for (volatile int i = 0; i < 100; i++);
}

if (timeout <= 0) {
    printf("âŒ ç­‰å¾…è¶…æ—¶: status=0x%08x\n", status_register);
    return -1;
}
```

##### ğŸ”„ Type 3: ä»¿çœŸå™¨é—®é¢˜

**ç‰¹å¾ï¼š**
- ä»¿çœŸå™¨è¿›ç¨‹å­˜åœ¨ä½†ä¸å“åº”
- ç³»ç»Ÿèµ„æºå¼‚å¸¸

**è§£å†³æ–¹æ³•ï¼š**
```bash
# å¼ºåˆ¶ç»ˆæ­¢å¹¶é‡å¯
killall -9 $CV_SIMULATOR
make clean_test TEST=problematic_test
make test TEST=problematic_test
```

#### ğŸ” Step 3: ç»“æœé”™è¯¯è¯Šæ–­

##### âŒ æµ‹è¯•ç»“æœä¸ç¬¦åˆé¢„æœŸ

**è¯Šæ–­æ­¥éª¤ï¼š**

1. **ç¡®è®¤è¾“å…¥æ•°æ®**
```bash
# æ£€æŸ¥æµ‹è¯•ç¨‹åºçš„è¾“å…¥
grep -n "main\|input\|data" cv32e40p/tests/programs/custom/your_test/*.c
```

2. **è·Ÿè¸ªæ‰§è¡Œè·¯å¾„**
```c
// åœ¨å…³é”®ç‚¹æ·»åŠ æ‰“å°
printf("ğŸ” DEBUG: æ‰§è¡Œåˆ°checkpoint 1, value=%d\n", value);
```

3. **æ¯”è¾ƒå¯„å­˜å™¨çŠ¶æ€**
```c
// è¯»å–å…³é”®å¯„å­˜å™¨
uint32_t reg_val;
__asm__ volatile("csrr %0, 0x300" : "=r"(reg_val));  // MSTATUS
printf("ğŸ” MSTATUS = 0x%08x\n", reg_val);
```

4. **éªŒè¯å†…å­˜å†…å®¹**
```c
// æ£€æŸ¥å†…å­˜ç‰¹å®šä½ç½®
volatile uint32_t *mem_ptr = (volatile uint32_t *)0x80000000;
printf("ğŸ” Memory[0x80000000] = 0x%08x\n", *mem_ptr);
```

---

## ğŸ“Š æ³¢å½¢è°ƒè¯•ç³»ç»ŸåŒ–æ–¹æ³•

### ğŸŒŠ æ³¢å½¢ç”Ÿæˆæœ€ä½³å®è·µ

#### ğŸ”§ ç”Ÿæˆé«˜è´¨é‡æ³¢å½¢

```bash
# ç”Ÿæˆå®Œæ•´æ³¢å½¢ï¼ˆåŒ…å«æ‰€æœ‰ä¿¡å·ï¼‰
make test TEST=debug_test WAVES=1 USER_RUN_FLAGS="+all_waves"

# ç”Ÿæˆå‹ç¼©æ³¢å½¢ï¼ˆåªåŒ…å«å…³é”®ä¿¡å·ï¼‰
make test TEST=debug_test WAVES=1 USER_RUN_FLAGS="+key_signals_only"

# ç”Ÿæˆå¸¦æ—¶é—´æ ‡è®°çš„æ³¢å½¢
make test TEST=debug_test WAVES=1 USER_RUN_FLAGS="+wave_markers"
```

#### ğŸ¯ å…³é”®ä¿¡å·è¯†åˆ«

**CPUæ ¸å¿ƒä¿¡å·ï¼š**
```
- clk_i                    # æ—¶é’Ÿ
- rst_ni                   # å¤ä½ (ä½æœ‰æ•ˆ)
- pc_if                    # ç¨‹åºè®¡æ•°å™¨
- instr_*                  # æŒ‡ä»¤æ€»çº¿
- data_*                   # æ•°æ®æ€»çº¿
- irq_*                    # ä¸­æ–­ä¿¡å·
```

**è°ƒè¯•é‡ç‚¹ä¿¡å·ï¼š**
```
uvmt_cv32e40p_tb.dut_wrap.cv32e40p_wrapper_i.core_i
â”œâ”€â”€ pc_if                  # å½“å‰æ‰§è¡Œåœ°å€
â”œâ”€â”€ instr_rdata_i          # å½“å‰æŒ‡ä»¤
â”œâ”€â”€ id_stage_i.regfile_*   # å¯„å­˜å™¨æ–‡ä»¶
â”œâ”€â”€ ex_stage_i.*           # æ‰§è¡Œé˜¶æ®µ
â””â”€â”€ load_store_unit_i.*    # å­˜å‚¨å™¨è®¿é—®
```

### ğŸ” æ³¢å½¢åˆ†ææŠ€å·§

#### ğŸ“ˆ æ—¶åºåˆ†ææ–¹æ³•

**Step 1: å»ºç«‹æ—¶é—´åŸºå‡†**
```
1. æ‰¾åˆ°å¤ä½é‡Šæ”¾ç‚¹ (rst_ni ä»0å˜1)
2. æ‰¾åˆ°ç¬¬ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œ (pc_if != 0)
3. å»ºç«‹æŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´åºåˆ—
```

**Step 2: æŒ‡ä»¤çº§è·Ÿè¸ª**
```
å¯¹äºæ¯æ¡æŒ‡ä»¤ï¼Œè§‚å¯Ÿï¼š
- IFé˜¶æ®µ: pc_if, instr_req_o, instr_rdata_i
- IDé˜¶æ®µ: decodeç›¸å…³ä¿¡å·ï¼Œå¯„å­˜å™¨è¯»å–
- EXé˜¶æ®µ: ALUæ“ä½œï¼Œåˆ†æ”¯è®¡ç®—
- MEMé˜¶æ®µ: å†…å­˜è®¿é—® (å¦‚æœæœ‰)
- WBé˜¶æ®µ: å¯„å­˜å™¨å†™å›
```

**Step 3: å¼‚å¸¸æƒ…å†µæ£€æµ‹**
```
å¼‚å¸¸æ¨¡å¼è¯†åˆ«ï¼š
- PCè·³è½¬å¼‚å¸¸ (pc_if è·³åˆ°æ„å¤–åœ°å€)
- æŒ‡ä»¤æµå¼‚å¸¸ (instr_rdata_i ä¸ç¬¦åˆé¢„æœŸ)
- æ€»çº¿å¼‚å¸¸ (reqä¿¡å·æ— gntå“åº”)
- ä¸­æ–­å¼‚å¸¸ (irqå“åº”æ—¶åºé—®é¢˜)
```

#### ğŸ” å®ç”¨æ³¢å½¢è°ƒè¯•è„šæœ¬

```tcl
# waveform_debug.tcl - æ³¢å½¢è°ƒè¯•è‡ªåŠ¨åŒ–è„šæœ¬

# ğŸ”¹ æ·»åŠ å…³é”®ä¿¡å·ç»„
add_wave_group "CPU Core" {
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/clk_i
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/rst_ni
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/pc_if
}

add_wave_group "Instruction Bus" {
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/instr_req_o
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/instr_gnt_i
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/instr_rvalid_i
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/instr_rdata_i
}

add_wave_group "Data Bus" {
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/data_req_o
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/data_gnt_i
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/data_addr_o
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/data_wdata_o
    /uvmt_cv32e40p_tb/dut_wrap/cv32e40p_wrapper_i/core_i/data_rdata_i
}

# ğŸ”¹ è®¾ç½®æ—¶é—´æ ¼å¼
configure_time_format -unit ns -precision 3

# ğŸ”¹ è®¾ç½®æ ‡è®°ç‚¹
add_marker "Reset Release" [find_time rst_ni == 1]
add_marker "First Instruction" [find_time pc_if != 0]

# ğŸ”¹ è‡ªåŠ¨ç¼©æ”¾åˆ°å…³é”®åŒºåŸŸ
zoom_to_range [find_time rst_ni == 1] [expr [find_time rst_ni == 1] + 1000ns]
```

#### ğŸ¯ å¸¸è§æ³¢å½¢é—®é¢˜æ¨¡å¼

##### ğŸ”„ æ¨¡å¼1: æ€»çº¿æ¡æ‰‹å¼‚å¸¸

**è¯†åˆ«ç‰¹å¾ï¼š**
```
instr_req_o = 1   # è¯·æ±‚å‘å‡º
instr_gnt_i = 0   # ä½†é•¿æ—¶é—´æ²¡æœ‰grant
```

**è°ƒè¯•æ–¹æ³•ï¼š**
```tcl
# æŸ¥æ‰¾æ‰€æœ‰æœªå“åº”çš„è¯·æ±‚
find_signal_transitions instr_req_o 0->1
filter_by_condition {instr_gnt_i == 0 for >100ns}
```

**å¯èƒ½åŸå› ï¼š**
- å†…å­˜æ¨¡å‹é…ç½®é”™è¯¯
- åœ°å€æ˜ å°„é—®é¢˜
- æ—¶é’ŸåŸŸé—®é¢˜

##### ğŸ”„ æ¨¡å¼2: PCè·³è½¬å¼‚å¸¸

**è¯†åˆ«ç‰¹å¾ï¼š**
```
pc_if çªç„¶è·³è½¬åˆ°æ„å¤–åœ°å€ (å¦‚0x0, 0xFFFFFFFF)
```

**è°ƒè¯•æ–¹æ³•ï¼š**
```tcl
# è·Ÿè¸ªPCå˜åŒ–
trace_signal pc_if
highlight_jumps >0x1000  # é«˜äº®å¤§å¹…è·³è½¬
```

**å¯èƒ½åŸå› ï¼š**
- å †æ ˆæº¢å‡º
- å‡½æ•°æŒ‡é’ˆé”™è¯¯
- ä¸­æ–­å‘é‡è¡¨é—®é¢˜

---

## ğŸ“ æ—¥å¿—åˆ†æé«˜æ•ˆæŠ€å·§

### ğŸ“Š UVMæ—¥å¿—ç»“æ„è§£æ

#### ğŸ” æ—¥å¿—çº§åˆ«ä¼˜å…ˆçº§

```
UVMæ—¥å¿—çº§åˆ« (æŒ‰é‡è¦æ€§æ’åº):
UVM_FATAL   (0) - è‡´å‘½é”™è¯¯ï¼Œç«‹å³åœæ­¢
UVM_ERROR   (100) - é”™è¯¯ï¼Œå½±å“æµ‹è¯•ç»“æœ
UVM_WARNING (200) - è­¦å‘Šï¼Œéœ€è¦æ³¨æ„
UVM_INFO    (300) - ä¿¡æ¯ï¼Œæ­£å¸¸æµç¨‹
UVM_DEBUG   (400) - è°ƒè¯•ï¼Œè¯¦ç»†ä¿¡æ¯
```

#### ğŸ“ˆ æ—¥å¿—åˆ†æè‡ªåŠ¨åŒ–è„šæœ¬

```bash
#!/bin/bash
# log_analyzer.sh - UVMæ—¥å¿—æ™ºèƒ½åˆ†æå™¨

LOG_FILE=${1:-"cv32e40p_*.log"}

echo "ğŸ“ UVMæ—¥å¿—æ™ºèƒ½åˆ†æ"
echo "===================="

# ğŸ”¹ é”™è¯¯ç»Ÿè®¡
echo "1. é”™è¯¯ç»Ÿè®¡:"
FATAL_COUNT=$(grep -c "UVM_FATAL" $LOG_FILE)
ERROR_COUNT=$(grep -c "UVM_ERROR" $LOG_FILE)
WARNING_COUNT=$(grep -c "UVM_WARNING" $LOG_FILE)

echo "   ğŸ’€ FATAL: $FATAL_COUNT"
echo "   âŒ ERROR: $ERROR_COUNT"  
echo "   âš ï¸  WARNING: $WARNING_COUNT"

# ğŸ”¹ å…³é”®é˜¶æ®µè¯†åˆ«
echo "2. ä»¿çœŸé˜¶æ®µ:"
if grep -q "BUILD.*PASSED" $LOG_FILE; then
    echo "   âœ… æ„å»ºé˜¶æ®µ: PASSED"
elif grep -q "BUILD.*FAILED" $LOG_FILE; then
    echo "   âŒ æ„å»ºé˜¶æ®µ: FAILED"
else
    echo "   âš ï¸  æ„å»ºé˜¶æ®µ: UNKNOWN"
fi

if grep -q "RUN.*PASSED" $LOG_FILE; then
    echo "   âœ… è¿è¡Œé˜¶æ®µ: PASSED"
elif grep -q "RUN.*FAILED" $LOG_FILE; then
    echo "   âŒ è¿è¡Œé˜¶æ®µ: FAILED"
else
    echo "   âš ï¸  è¿è¡Œé˜¶æ®µ: UNKNOWN"
fi

# ğŸ”¹ æ€§èƒ½æŒ‡æ ‡
echo "3. æ€§èƒ½æŒ‡æ ‡:"
SIM_TIME=$(grep "Simulation time" $LOG_FILE | tail -1 | awk '{print $3}')
if [ -n "$SIM_TIME" ]; then
    echo "   â±ï¸  ä»¿çœŸæ—¶é—´: $SIM_TIME"
fi

WALL_TIME=$(grep "Wall time" $LOG_FILE | tail -1 | awk '{print $3}')
if [ -n "$WALL_TIME" ]; then
    echo "   ğŸ• å®é™…æ—¶é—´: $WALL_TIME"
fi

# ğŸ”¹ å…³é”®æ¶ˆæ¯æå–
echo "4. å…³é”®æ¶ˆæ¯:"
echo "   ğŸ’€ è‡´å‘½é”™è¯¯:"
grep "UVM_FATAL" $LOG_FILE | head -3

echo "   âŒ æœ€æ–°é”™è¯¯:"
grep "UVM_ERROR" $LOG_FILE | tail -3

echo "   ğŸ¯ æµ‹è¯•ç»“æœ:"
grep -E "(TEST.*PASSED|TEST.*FAILED|SIMULATION.*PASSED|SIMULATION.*FAILED)" $LOG_FILE | tail -1

# ğŸ”¹ å†…å­˜ä½¿ç”¨åˆ†æ
echo "5. èµ„æºä½¿ç”¨:"
MEMORY_PEAK=$(grep -i "memory.*peak\|peak.*memory" $LOG_FILE | tail -1)
if [ -n "$MEMORY_PEAK" ]; then
    echo "   ğŸ’¾ å†…å­˜å³°å€¼: $MEMORY_PEAK"
fi

CPU_TIME=$(grep -i "cpu.*time\|processor.*time" $LOG_FILE | tail -1)
if [ -n "$CPU_TIME" ]; then
    echo "   ğŸ–¥ï¸  CPUæ—¶é—´: $CPU_TIME"
fi
```

#### ğŸ¯ æ—¥å¿—æœç´¢æŠ€å·§

**å¿«é€Ÿå®šä½é”™è¯¯ï¼š**
```bash
# ğŸ” æ‰¾åˆ°ç¬¬ä¸€ä¸ªé”™è¯¯å‘ç”Ÿçš„ä½ç½®
grep -n "UVM_ERROR\|UVM_FATAL" cv32e40p_*.log | head -1

# ğŸ” æŸ¥çœ‹é”™è¯¯å‰åçš„ä¸Šä¸‹æ–‡
ERROR_LINE=$(grep -n "UVM_ERROR" cv32e40p_*.log | head -1 | cut -d: -f2)
sed -n "$((ERROR_LINE-5)),$((ERROR_LINE+5))p" cv32e40p_*.log

# ğŸ” æŒ‰æ—¶é—´æˆ³æ’åºé”™è¯¯
grep "UVM_ERROR\|UVM_FATAL" cv32e40p_*.log | sort -k2
```

**è·Ÿè¸ªç‰¹å®šç»„ä»¶ï¼š**
```bash
# ğŸ” è·Ÿè¸ªç‰¹å®šAgentçš„æ´»åŠ¨
grep "obi_memory_agent" cv32e40p_*.log | head -20

# ğŸ” è·Ÿè¸ªåºåˆ—æ‰§è¡Œ
grep -E "(Starting|Finished|Executing).*sequence" cv32e40p_*.log

# ğŸ” è·Ÿè¸ªphaseåˆ‡æ¢
grep -E "(phase.*started|phase.*finished)" cv32e40p_*.log
```

**æ€§èƒ½çƒ­ç‚¹åˆ†æï¼š**
```bash
# ğŸ” æŸ¥æ‰¾è€—æ—¶æœ€é•¿çš„æ“ä½œ
grep -E "(Starting|Finished)" cv32e40p_*.log | \
  awk '{print $1, $2, $NF}' | \
  sort -k2

# ğŸ” ç»Ÿè®¡å„ç»„ä»¶çš„æ´»åŠ¨é¢‘ç‡
grep "UVM_INFO" cv32e40p_*.log | \
  awk '{print $4}' | \
  sort | uniq -c | sort -nr | head -10
```

### ğŸ”§ è‡ªå®šä¹‰æ—¥å¿—å¢å¼º

#### ğŸ“Š åœ¨æµ‹è¯•ç¨‹åºä¸­æ·»åŠ ç»“æ„åŒ–æ—¥å¿—

```c
// structured_logging.h - ç»“æ„åŒ–æ—¥å¿—å®

#ifndef STRUCTURED_LOGGING_H
#define STRUCTURED_LOGGING_H

#include <stdio.h>

// ğŸ”¹ æ—¥å¿—çº§åˆ«å®šä¹‰
typedef enum {
    LOG_FATAL = 0,
    LOG_ERROR = 1, 
    LOG_WARN  = 2,
    LOG_INFO  = 3,
    LOG_DEBUG = 4
} log_level_t;

// ğŸ”¹ æ—¥å¿—å®å®šä¹‰
#define LOG_WITH_LEVEL(level, tag, fmt, ...) \
    printf("[%s] %s: " fmt "\n", #level, tag, ##__VA_ARGS__)

#define LOG_FATAL(tag, fmt, ...) LOG_WITH_LEVEL(FATAL, tag, fmt, ##__VA_ARGS__)
#define LOG_ERROR(tag, fmt, ...) LOG_WITH_LEVEL(ERROR, tag, fmt, ##__VA_ARGS__)
#define LOG_WARN(tag, fmt, ...)  LOG_WITH_LEVEL(WARN,  tag, fmt, ##__VA_ARGS__)
#define LOG_INFO(tag, fmt, ...)  LOG_WITH_LEVEL(INFO,  tag, fmt, ##__VA_ARGS__)
#define LOG_DEBUG(tag, fmt, ...) LOG_WITH_LEVEL(DEBUG, tag, fmt, ##__VA_ARGS__)

// ğŸ”¹ å¸¦æ—¶é—´æˆ³çš„æ—¥å¿—
#define LOG_TIMESTAMP() \
    do { \
        uint64_t cycles = read_cycle_counter(); \
        printf("[TIMESTAMP] Cycle: %llu\n", cycles); \
    } while(0)

// ğŸ”¹ æ€§èƒ½æµ‹é‡å®
#define PERF_START(name) \
    uint64_t perf_start_##name = read_cycle_counter(); \
    LOG_INFO("PERF", "å¼€å§‹æµ‹é‡: " #name)

#define PERF_END(name) \
    do { \
        uint64_t perf_end_##name = read_cycle_counter(); \
        uint64_t perf_elapsed_##name = perf_end_##name - perf_start_##name; \
        LOG_INFO("PERF", "å®Œæˆæµ‹é‡: " #name " - %llu cycles", perf_elapsed_##name); \
    } while(0)

#endif // STRUCTURED_LOGGING_H
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```c
#include "structured_logging.h"

int main() {
    LOG_INFO("MAIN", "æµ‹è¯•å¼€å§‹");
    
    PERF_START(arithmetic_test);
    
    // æ‰§è¡Œæµ‹è¯•
    int result = 0;
    for (int i = 0; i < 1000; i++) {
        result += i * i;
        
        if (i % 100 == 0) {
            LOG_DEBUG("LOOP", "å¤„ç†è¿›åº¦: %d/1000", i);
        }
    }
    
    PERF_END(arithmetic_test);
    
    if (result > 0) {
        LOG_INFO("RESULT", "æµ‹è¯•é€šè¿‡: result=%d", result);
        return 0;
    } else {
        LOG_ERROR("RESULT", "æµ‹è¯•å¤±è´¥: result=%d", result);
        return 1;
    }
}
```

---

## âš¡ æ€§èƒ½é—®é¢˜è¯Šæ–­ä¸ä¼˜åŒ–

### ğŸ“Š æ€§èƒ½ç“¶é¢ˆè¯†åˆ«

#### ğŸ” ä»¿çœŸé€Ÿåº¦é—®é¢˜

**ç—‡çŠ¶è¯†åˆ«ï¼š**
```bash
# æµ‹é‡ä»¿çœŸé€Ÿåº¦
time make test TEST=performance_test

# ç›‘æ§èµ„æºä½¿ç”¨
top -p $(pgrep $CV_SIMULATOR)
```

**å¸¸è§ç“¶é¢ˆï¼š**

##### ğŸŒ ç“¶é¢ˆ1: å†…å­˜ä¸è¶³

**è¯†åˆ«æ–¹æ³•ï¼š**
```bash
# ç›‘æ§å†…å­˜ä½¿ç”¨
free -h
watch -n1 'free -h'

# æ£€æŸ¥äº¤æ¢åˆ†åŒºä½¿ç”¨
swapon -s
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# é™åˆ¶ä»¿çœŸå™¨å†…å­˜ä½¿ç”¨
export CV_SIMULATOR_ARGS="$CV_SIMULATOR_ARGS +memory_limit=8GB"

# ä½¿ç”¨æ›´é«˜æ•ˆçš„ç¼–è¯‘é€‰é¡¹
make test TEST=your_test USER_RUN_FLAGS="+nc64bit +nospecify"
```

##### ğŸŒ ç“¶é¢ˆ2: ç£ç›˜I/O

**è¯†åˆ«æ–¹æ³•ï¼š**
```bash
# ç›‘æ§ç£ç›˜I/O
iostat -x 1

# æ£€æŸ¥ä¸´æ—¶æ–‡ä»¶å¤§å°
du -sh cv32e40p_*
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ä½¿ç”¨å†…å­˜æ–‡ä»¶ç³»ç»Ÿ
mkdir /tmp/cv32e40p_sim
export TMPDIR=/tmp/cv32e40p_sim

# å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
make clean_test TEST=your_test
```

##### ğŸŒ ç“¶é¢ˆ3: ä»¿çœŸå™¨é…ç½®

**ä¼˜åŒ–é…ç½®ï¼š**
```bash
# Xceliumä¼˜åŒ–é…ç½®
export CV_SIMULATOR_ARGS="\
  +nc64bit \
  +noaccess \
  +nospecify \
  +notimingchecks \
  +define+NO_ASSERT \
  +define+NO_COVER"

# VCSä¼˜åŒ–é…ç½®  
export CV_SIMULATOR_ARGS="\
  +vcs64 \
  +nospecify \
  +notimingcheck \
  -debug_access+r"
```

#### ğŸ¯ è¦†ç›–ç‡æ”¶é›†ä¼˜åŒ–

**é—®é¢˜ï¼šè¦†ç›–ç‡æ”¶é›†å¯¼è‡´ä»¿çœŸå˜æ…¢**

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# é€‰æ‹©æ€§è¦†ç›–ç‡æ”¶é›†
make test TEST=your_test COV=1 USER_RUN_FLAGS="+coverage_scope=dut_only"

# åå¤„ç†æ¨¡å¼
make test TEST=your_test  # å…ˆè¿è¡Œä¸æ”¶é›†è¦†ç›–ç‡
make cov TEST=your_test   # åå¤„ç†æ”¶é›†è¦†ç›–ç‡
```

### ğŸ”§ å¹¶è¡Œä»¿çœŸé…ç½®

#### ğŸš€ å¤šæ ¸ä»¿çœŸè®¾ç½®

```bash
# Xceliumå¹¶è¡Œä»¿çœŸ
export CV_SIMULATOR_ARGS="$CV_SIMULATOR_ARGS +ncthreads=4"

# VCSå¹¶è¡Œä»¿çœŸ
export CV_SIMULATOR_ARGS="$CV_SIMULATOR_ARGS -j4"

# Questaå¹¶è¡Œä»¿çœŸ
export CV_SIMULATOR_ARGS="$CV_SIMULATOR_ARGS -threads=4"
```

#### ğŸ“Š æ‰¹é‡æµ‹è¯•ä¼˜åŒ–

```bash
#!/bin/bash
# parallel_test_runner.sh - å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ

TESTS=("test1" "test2" "test3" "test4")
MAX_PARALLEL=4

run_test() {
    local test_name=$1
    echo "ğŸš€ è¿è¡Œæµ‹è¯•: $test_name"
    make test TEST=$test_name > ${test_name}.log 2>&1
    if [ $? -eq 0 ]; then
        echo "âœ… $test_name PASSED"
    else
        echo "âŒ $test_name FAILED"
    fi
}

# å¹¶è¡Œæ‰§è¡Œæµ‹è¯•
for test in "${TESTS[@]}"; do
    (($(jobs -r | wc -l) >= MAX_PARALLEL)) && wait
    run_test "$test" &
done

wait  # ç­‰å¾…æ‰€æœ‰æµ‹è¯•å®Œæˆ
echo "ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆ"
```

---

## ğŸ› ï¸ ç¯å¢ƒé—®é¢˜æ’æŸ¥

### ğŸ”§ å·¥å…·é“¾é—®é¢˜

#### âŒ RISC-Vå·¥å…·é“¾é—®é¢˜

**å¸¸è§é”™è¯¯ï¼š**
```
riscv32-unknown-elf-gcc: command not found
```

**å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š**
```bash
# 1. æ£€æŸ¥å·¥å…·é“¾æ˜¯å¦å®‰è£…
ls -la /opt/riscv/bin/

# 2. å¦‚æœæœªå®‰è£…ï¼Œä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬
wget https://github.com/riscv/riscv-gnu-toolchain/releases/download/2023.01.31/riscv32-glibc-ubuntu-20.04-nightly-2023.01.31-nightly.tar.gz

# 3. è§£å‹åˆ°æŒ‡å®šç›®å½•
sudo tar -xzf riscv32-glibc-ubuntu-20.04-nightly-2023.01.31-nightly.tar.gz -C /opt/

# 4. è®¾ç½®ç¯å¢ƒå˜é‡
export CV_SW_TOOLCHAIN=/opt/riscv
export CV_SW_PREFIX=riscv32-unknown-elf-
export PATH=$CV_SW_TOOLCHAIN/bin:$PATH

# 5. éªŒè¯å®‰è£…
${CV_SW_PREFIX}gcc --version
```

#### âŒ ä»¿çœŸå™¨è®¸å¯è¯é—®é¢˜

**é”™è¯¯ç±»å‹ï¼š**
```
License checkout failed
Cannot find license file
```

**è§£å†³æ­¥éª¤ï¼š**
```bash
# 1. æ£€æŸ¥è®¸å¯è¯æœåŠ¡å™¨
echo $LM_LICENSE_FILE
ping license_server_ip

# 2. æ£€æŸ¥è®¸å¯è¯çŠ¶æ€
lmstat -a

# 3. é‡å¯è®¸å¯è¯å®¢æˆ·ç«¯
lmreread

# 4. æ£€æŸ¥ç½‘ç»œè¿æ¥
telnet license_server_ip license_port
```

### ğŸ” æƒé™å’Œè·¯å¾„é—®é¢˜

#### âŒ æƒé™æ‹’ç»

```bash
# è¯Šæ–­æƒé™é—®é¢˜
ls -la cv32e40p_*
id

# ä¿®å¤æƒé™
chmod +x $CV_SW_TOOLCHAIN/bin/*
chown -R $USER:$USER $CORE_V_VERIF
```

#### âŒ è·¯å¾„é—®é¢˜

```bash
# æ£€æŸ¥å…³é”®è·¯å¾„
echo "CORE_V_VERIF: $CORE_V_VERIF"
echo "CV_SW_TOOLCHAIN: $CV_SW_TOOLCHAIN"
echo "PATH: $PATH"

# éªŒè¯è·¯å¾„æœ‰æ•ˆæ€§
test -d "$CORE_V_VERIF" && echo "âœ… é¡¹ç›®è·¯å¾„æœ‰æ•ˆ" || echo "âŒ é¡¹ç›®è·¯å¾„æ— æ•ˆ"
test -d "$CV_SW_TOOLCHAIN" && echo "âœ… å·¥å…·é“¾è·¯å¾„æœ‰æ•ˆ" || echo "âŒ å·¥å…·é“¾è·¯å¾„æ— æ•ˆ"
```

---

## ğŸ¯ ç»¼åˆè°ƒè¯•ç­–ç•¥

### ğŸ“‹ ç³»ç»ŸåŒ–è°ƒè¯•æ¸…å•

#### ğŸ” é—®é¢˜å‡ºç°æ—¶çš„æ ‡å‡†æµç¨‹

**Phase 1: å¿«é€Ÿè¯Šæ–­ (5åˆ†é’Ÿ)**
- [ ] æ£€æŸ¥æœ€æ–°æ—¥å¿—æ–‡ä»¶
- [ ] ç¡®è®¤æµ‹è¯•é€€å‡ºçŠ¶æ€
- [ ] éªŒè¯ç¯å¢ƒå˜é‡è®¾ç½®
- [ ] æ£€æŸ¥ä»¿çœŸè¿›ç¨‹çŠ¶æ€

**Phase 2: æ·±åº¦åˆ†æ (15åˆ†é’Ÿ)**  
- [ ] åˆ†æå®Œæ•´æ—¥å¿—å†…å®¹
- [ ] æ£€æŸ¥ç¼–è¯‘è¾“å‡º
- [ ] æŸ¥çœ‹æ³¢å½¢æ–‡ä»¶ (å¦‚æœæœ‰)
- [ ] å¯¹æ¯”æ­£å¸¸è¿è¡Œçš„æµ‹è¯•

**Phase 3: ç³»ç»Ÿæ’æŸ¥ (30åˆ†é’Ÿ)**
- [ ] é‡æ–°è¿è¡Œhello-worldéªŒè¯ç¯å¢ƒ
- [ ] æ£€æŸ¥å·¥å…·é“¾å®Œæ•´æ€§
- [ ] éªŒè¯é¡¹ç›®æ–‡ä»¶å®Œæ•´æ€§
- [ ] æµ‹è¯•ä¸åŒé…ç½®é€‰é¡¹

#### ğŸ› ï¸ è°ƒè¯•å·¥å…·ç®±

**å¿…å¤‡è„šæœ¬é›†åˆï¼š**
```bash
# åˆ›å»ºè°ƒè¯•å·¥å…·ç›®å½•
mkdir $CORE_V_VERIF/debug_tools

# ç¯å¢ƒæ£€æŸ¥è„šæœ¬
cp compile_env_check.sh $CORE_V_VERIF/debug_tools/
cp sim_health_check.sh $CORE_V_VERIF/debug_tools/
cp log_analyzer.sh $CORE_V_VERIF/debug_tools/

# ä¸€é”®è¯Šæ–­è„šæœ¬
cat > $CORE_V_VERIF/debug_tools/quick_diagnosis.sh << 'EOF'
#!/bin/bash
echo "ğŸ”§ CV32E40På¿«é€Ÿè¯Šæ–­å·¥å…·"
echo "========================"

echo "1. ç¯å¢ƒæ£€æŸ¥:"
./compile_env_check.sh

echo -e "\n2. ä»¿çœŸçŠ¶æ€:"
./sim_health_check.sh

echo -e "\n3. æ—¥å¿—åˆ†æ:"
./log_analyzer.sh

echo -e "\n4. å»ºè®®æ“ä½œ:"
if [ $? -eq 0 ]; then
    echo "âœ… ç¯å¢ƒæ­£å¸¸ï¼Œå¯ä»¥ç»§ç»­è°ƒè¯•å…·ä½“é—®é¢˜"
else
    echo "âŒ å‘ç°ç¯å¢ƒé—®é¢˜ï¼Œè¯·å…ˆä¿®å¤åŸºç¡€ç¯å¢ƒ"
fi
EOF

chmod +x $CORE_V_VERIF/debug_tools/*.sh
```

---

## ğŸ‰ æˆåŠŸè°ƒè¯•éªŒè¯

### âœ… è°ƒè¯•æŠ€èƒ½æ£€æŸ¥æ¸…å•

å®Œæˆä¸€ä¸ªå®Œæ•´çš„è°ƒè¯•æ¡ˆä¾‹åï¼Œç¡®ä¿ä½ æŒæ¡äº†ï¼š

- [ ] âœ… èƒ½å¤Ÿå¿«é€Ÿè¯†åˆ«é—®é¢˜ç±»å‹ (ç¼–è¯‘/ä»¿çœŸ/ç»“æœ)
- [ ] âœ… ç†Ÿç»ƒä½¿ç”¨æ—¥å¿—åˆ†æå·¥å…·
- [ ] âœ… èƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨æ³¢å½¢è°ƒè¯•
- [ ] âœ… æŒæ¡ç³»ç»ŸåŒ–çš„æ’æŸ¥æ–¹æ³•
- [ ] âœ… å»ºç«‹äº†ä¸ªäººè°ƒè¯•å·¥å…·åº“

### ğŸ”— ä¸‹ä¸€æ­¥è¿›é˜¶å­¦ä¹ 

æŒæ¡è°ƒè¯•æŠ€å·§åï¼Œå»ºè®®å­¦ä¹ ï¼š

1. **[../05-é«˜çº§åŠŸèƒ½åº”ç”¨/01-å¹³å°é«˜çº§åŠŸèƒ½ä½¿ç”¨æŒ‡å—.md](../05-é«˜çº§åŠŸèƒ½åº”ç”¨/01-å¹³å°é«˜çº§åŠŸèƒ½ä½¿ç”¨æŒ‡å—.md)** - è¦†ç›–ç‡åˆ†æã€æ€§èƒ½ä¼˜åŒ–ç­‰é«˜çº§åŠŸèƒ½
2. **[../02-ä»£ç åˆ†æ/02-ç»„ä»¶æ¶æ„ä»£ç è¯¦è§£.md](../02-ä»£ç åˆ†æ/02-ç»„ä»¶æ¶æ„ä»£ç è¯¦è§£.md)** - æ·±å…¥ç†è§£ç³»ç»Ÿæ¶æ„ä»¥æ›´å¥½åœ°å®šä½é—®é¢˜

---

> ğŸ’¡ **è°ƒè¯•å¿ƒå¾—**  
> è°ƒè¯•æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œéœ€è¦ç³»ç»ŸåŒ–çš„æ–¹æ³•å’Œä¸°å¯Œçš„ç»éªŒã€‚æ¯æ¬¡é‡åˆ°æ–°é—®é¢˜éƒ½æ˜¯å­¦ä¹ çš„æœºä¼šï¼Œå»ºè®®è®°å½•ä¸‹é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œå½¢æˆä¸ªäººçŸ¥è¯†åº“ã€‚

> ğŸ”§ **æ•ˆç‡æç¤º**  
> å»ºç«‹æ ‡å‡†åŒ–çš„è°ƒè¯•æµç¨‹å’Œå·¥å…·é›†ï¼Œå¯ä»¥å¤§å¤§æå‡é—®é¢˜è§£å†³æ•ˆç‡ã€‚ä¸å›¢é˜Ÿåˆ†äº«è°ƒè¯•ç»éªŒï¼Œå…±åŒæå‡æ•´ä½“å¼€å‘æ•ˆç‡ã€‚